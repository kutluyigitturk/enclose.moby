<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>enclose.moby</title>
    <link rel="icon" type="image/png" href= "data:image/png;base64,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">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@500&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- ── TOP LEFT: Information Button ─────────────────────────────────────────── -->
<div style="position: fixed; top: 20px; left: 20px; z-index: 2000;">
  <button class="menu-btn" type="button" onclick="openInfo()" aria-label="Info">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
         viewBox="0 0 24 24" fill="none" stroke="currentColor"
         stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
         class="lucide lucide-info-icon lucide-info">
      <circle cx="12" cy="12" r="10"/>
      <path d="M12 16v-4"/>
      <path d="M12 8h.01"/>
    </svg>
  </button>
</div>


<!-- ── TITLE ──────────────────────────────────────────────────────────────── -->
<div class="header-container">
    <div class="title">enclose.moby</div>
    <div class="subtitle" id="level-name-display">Level 1</div>
</div>

<!-- ── NETWORK TOP: Audio + Hamburger Menu ─────────────────────────────────────── -->
<div class="menu-container">
    <div style="display: flex; align-items: center;">

        <!-- Language Swtich Button -->
        <button class="menu-btn lang-btn" onclick="toggleLang()" aria-label="Switch Language">
            <i class="bi bi-translate"></i>
        </button>

        <!-- Volume Button -->
        <button class="sound-btn" id="sound-toggle-btn" onclick="toggleSound()">
            <span class="sound-on">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                     fill="none" stroke="currentColor" stroke-width="2"
                     stroke-linecap="round" stroke-linejoin="round">
                    <path d="M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"/>
                    <path d="M16 9a5 5 0 0 1 0 6"/>
                    <path d="M19.364 18.364a9 9 0 0 0 0-12.728"/>
                </svg>
            </span>
            <span class="sound-off">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                     fill="none" stroke="currentColor" stroke-width="2"
                     stroke-linecap="round" stroke-linejoin="round">
                    <path d="M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"/>
                    <line x1="22" x2="16" y1="9" y2="15"/>
                    <line x1="16" x2="22" y1="9" y2="15"/>
                </svg>
            </span>
        </button>

        <!-- Hamburger Menu Button -->
        <button class="menu-btn" type="button" onclick="toggleDropdown()" aria-label="Menu">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor"
                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="lucide lucide-menu-icon lucide-menu">
                <path d="M4 5h16"/>
                <path d="M4 12h16"/>
                <path d="M4 19h16"/>
            </svg>
        </button>
    </div>

    <!-- Drop-down Menu -->
    <div id="dropdown-menu" class="dropdown-content">
        <button class="menu-item" onclick="openLevelSelector()" data-i18n="pastPuzzles">Past Puzzles</button>
        <button class="menu-item" onclick="openSettings()" data-i18n="settings">Settings</button>
    </div>
</div>

<!-- ── MENU BLUR LAYER ──────────────────────────────────────────────────── -->
<div id="menu-overlay"
     style="display:none; position:fixed; inset:0;
            background:rgba(0,0,0,0.3); backdrop-filter:blur(5px);
            z-index:1500;"
     onclick="toggleDropdown()">
</div>

<!-- ── GAME CANVAS ────────────────────────────────────────────────────────── -->
<canvas id="gameCanvas"></canvas>

<!-- ── ALT: Reset Button ─────────────────────────────────────────────────── -->
<div class="controls-container">
    <button class="btn-primary" id="reset-btn" data-i18n="reset">RESET</button>
</div>

<!-- ── MODALS ──────────────────────────────────────────────────────────── -->

<!-- Information / How to Play -->
<div class="modal-overlay" id="info-modal" onclick="closeInfo()">
    <div class="modal-box" onclick="event.stopPropagation()"
         style="border-radius:0; padding:20px; position:relative; width:350px;">

        <button onclick="closeInfo()" class="close-x-btn">✕</button>

        <!-- Tabs -->
        <div style="display:flex; gap:10px; margin-bottom:20px; margin-top:10px;">
            <button class="tab-btn active" id="btn-how" onclick="switchTab('how')" data-i18n="howToPlay">How to Play</button>
            <button class="tab-btn" id="btn-this" onclick="switchTab('this')" data-i18n="thisLevel">This Level</button>
        </div>

        <!-- How to Play -->
        <div id="content-how" class="tab-content active">
            <p id="how-desc" style="font-size:18px; text-align:center; margin-bottom:20px; color:#333;">
                Enclose Moby in the biggest possible pen!
            </p>
            <h3 id="how-rules-title" style="margin-bottom:10px; color:#000;">THE RULES</h3>
            <ul style="padding-left:20px; line-height:1.8; color:#333;">
                <li id="how-rule1">Click water tiles to place <b>buoys</b>.</li>
                <li id="how-rule2">You have limited buoys.</li>
                <li id="how-rule3">Moby can't move over land or buoys.</li>
                <li id="how-rule4">Bigger enclosure = bigger score!</li>
            </ul>
            <div style="background:#f1f1f1; padding:15px; margin-top:20px; font-style:italic; color:#333;">
                <b>Tip:</b> <span id="how-tip">Hover to see where Moby might escape!</span>
            </div>
        </div>

        <!-- This Level -->
        <div id="content-this" class="tab-content">
            <div id="level-stats-container" style="line-height:2.5; color:#333;"></div>
        </div>
    </div>
</div>

<!-- Past Puzzles -->
<div class="modal-overlay" id="level-modal" onclick="closeLevelSelector()">
    <div class="modal-box" onclick="event.stopPropagation()">
        <button onclick="closeLevelSelector()" class="close-x-btn">✕</button>
        <div class="modal-header-custom" data-i18n="pastPuzzles">Past Puzzles</div>
        <div class="level-list" id="level-list-container"></div>
    </div>
</div>

<!-- Settings -->
<div class="modal-overlay" id="settings-overlay" onclick="closeSettings()">
    <div class="modal-box" onclick="event.stopPropagation()">
        <button onclick="closeSettings()" class="close-x-btn">✕</button>
        <div class="modal-header-custom" data-i18n="settings">Settings</div>
        <div style="padding:10px; color:#333;">
            <label style="display:block; margin-bottom:15px; font-size:18px;">
                <span data-i18n="gridOpacity">Grid Visibility:</span>
                <span id="grid-val-display" style="font-weight:bold;">15%</span>
            </label>
            <input type="range" id="grid-opacity-slider"
                   min="0" max="100" value="15"
                   style="width:100%; cursor:pointer; accent-color:#f0c040;">
        </div>
    </div>
</div>

<!-- ============================================================================
     JAVASCRIPT — The loading order is arranged according to the dependency chain.
     ============================================================================ -->

<!-- 1. Constants and configuration -->
<script src="js/config.js" defer></script>

<!-- 2. Constants and configuration -->
<script src="js/strings.js" defer></script>

<!-- 3. Level data -->
<script src="js/levels.js" defer></script>

<!-- 4. Asset definitions (base64) -->
<script src="js/assets.js" defer></script>

<!-- 5. Speech bubble constants, messages, and render functions -->
<script src="js/bubble.js" defer></script>

<!-- 6. Game state, sound, canvas references, loadAssets, loadLevel -->
<script src="js/state.js" defer></script>

<!-- 7. UI, menu, modal, input, and resize -->
<script src="js/ui.js" defer></script>

<!-- 8. Render loop and all drawing functions -->
<script src="js/renderer.js" defer></script>

<!-- 9. Game mechanics: wave generation, winning condition, escape route -->
<script src="js/game.js" defer></script>

<!-- 10. Entry point: initGame and window.onload -->
<script src="js/main.js" defer></script>

</body>
</html>